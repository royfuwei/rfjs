name: Version (release/stable)

on:
    pull_request_target:
        branches: [release/stable]
        types: [closed]

permissions:
    contents: write
    pull-requests: write

concurrency:
    group: version-release-stable
    cancel-in-progress: false

jobs:
    version:
        if: >
            github.event.pull_request.merged == true &&
            github.event.pull_request.head.repo.full_name == github.repository
        uses: royfuwei/rf-devops/.github/workflows/_changesets-version-channel.yml@main
        secrets:
            GIT_TOKEN: ${{ secrets.GIT_TOKEN }}
        with:
            ref: release/stable
            channel: stable
            node_version: 20.x
            # 可選：預設 bot，不用傳；想改 actor 才傳
            # git_identity_mode: bot
